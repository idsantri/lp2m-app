"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[406],{3406:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ie});var t=l(1347),s=l(7763),n=l(4187),u=l(8094),o=l(783),d=l(5469),i=l(2010),r=l(1131),m=l(651);const c={__name:"ImageUploader",props:{width:{type:Number,default:450},height:{type:Number,default:600},showUploader:{type:Boolean,default:!1},url:{default:null},imgFormat:{type:String,default:"png"},fieldImage:{type:String,default:"image"}},emits:["updateUploader","successUpload"],setup(e,{emit:a}){const l=e,s=a,u=(0,n.KR)(!1);(0,t.wB)((()=>l.showUploader),(e=>{u.value=e})),(0,t.$u)((()=>{s("updateUploader",u.value)}));const o={hint:"Klik atau tarik file gambar ke sini untuk upload",loading:"Uploadingâ€¦",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload berhasil",fail:"Upload gagal",preview:"Preview",btn:{off:"Gagal",close:"Tutup",back:"Kembali",save:"Simpan"},error:{onlyImg:"Hanya gambar",outOfSize:"Gambar melebihi batas ukuran: ",lowestPx:"Ukuran gambar terlalu rendah. Setidaknya diharapkan: "}},c=(0,n.KR)(""),p={},b=e=>{c.value=e},g=e=>{(0,d.VX)(e.message),s("successUpload")},v=(e,a)=>{console.log("upload status",e),console.log("upload field",a),401==e&&(0,d.UG)("Akses ditolak!")};return(a,s)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.A),{field:e.fieldImage,langType:"en",langExt:o,"no-circle":"",onCropSuccess:b,onCropUploadSuccess:g,onCropUploadFail:v,modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),width:l.width,height:l.height,url:(0,n.R1)(r.A).defaults.baseURL+l.url,params:p,headers:{Authorization:`Bearer ${(0,n.R1)(m.A)()}`},withCredentials:"","img-format":l.imgFormat},null,8,["field","modelValue","width","height","url","headers","img-format"]))}},p=c,b=p;var g=l(8633),v=l(7509),k=l(9987);const f={key:0},x={__name:"CardUsername",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,s=a,u=(0,n.KR)({}),o=(0,n.KR)(!1);async function d(){const e={username:u.value.username},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:o});a&&(document.getElementById("btn-close-crud").click(),s("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(u.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),s=(0,t.g2)("q-dialog"),n=(0,t.g2)("q-input"),i=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-space"),c=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{onSubmit:(0,g.D$)(d,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(k.A,{title:"Update Username","is-new":!1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[o.value?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(s,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:u.value.username,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(m),(0,t.bo)((0,t.bF)(r,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(r,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var q=l(3341),w=l(3417),F=l(222),h=l(45),_=l(1402),A=l(6395),V=l(5034),y=l(2677),U=l(5873),C=l(1038),L=l(272),Q=l.n(L);const S=x,I=S;Q()(x,"components",{QCard:q.A,QForm:w.A,QCardSection:F.A,QDialog:h.A,QSpinnerCube:_.A,QInput:A.A,QCardActions:V.A,QBtn:y.A,QSpace:U.A}),Q()(x,"directives",{ClosePopup:C.A});var K=l(8552);const N={key:0},P={__name:"CardProfile",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,s=a,u=(0,n.KR)({}),o=(0,n.KR)(!1);async function d(){const e={prefix:u.value.prefix,name:u.value.name,suffix:u.value.suffix,nidn:u.value.nidn,prodi:u.value.prodi,nama_kampus:u.value.nama_kampus,phone:u.value.phone},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:o});a&&(document.getElementById("btn-close-crud").click(),s("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(u.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),s=(0,t.g2)("q-dialog"),n=(0,t.g2)("q-input"),i=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-space"),c=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{onSubmit:(0,g.D$)(d,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(k.A,{title:"Update Profil","is-new":!1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[o.value?((0,t.uX)(),(0,t.CE)("div",N,[(0,t.bF)(s,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Awalan",modelValue:u.value.prefix,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value.prefix=e),hint:"Gelar akademis (singkatan atau akronim)"},null,8,["modelValue"]),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Nama Lengkap",modelValue:u.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value.name=e),hint:"Gunakan huruf kapital hanya di awal kata"},null,8,["modelValue"]),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Akhiran",modelValue:u.value.suffix,"onUpdate:modelValue":a[3]||(a[3]=e=>u.value.suffix=e),hint:"Gelar akademis (singkatan atau akronim)"},null,8,["modelValue"]),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"NIDN",modelValue:u.value.nidn,"onUpdate:modelValue":a[4]||(a[4]=e=>u.value.nidn=e),hint:"Nomor Induk Dosen Nasional"},null,8,["modelValue"]),(0,t.bF)(K.A,{modelValue:u.value.prodi,"onUpdate:modelValue":a[5]||(a[5]=e=>u.value.prodi=e),url:"prodi",label:"Prodi *",class:"q-mt-sm","btn-setting":!1},null,8,["modelValue"]),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Nama Kampus",modelValue:u.value.nama_kampus,"onUpdate:modelValue":a[6]||(a[6]=e=>u.value.nama_kampus=e)},null,8,["modelValue"]),(0,t.bF)(n,{class:"q-mt-sm",dense:"",outlined:"",label:"Nomor Telepon",modelValue:u.value.phone,"onUpdate:modelValue":a[7]||(a[7]=e=>u.value.phone=e),hint:"08123456789"},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(m),(0,t.bo)((0,t.bF)(r,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(r,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}},R=P,E=R;Q()(P,"components",{QCard:q.A,QForm:w.A,QCardSection:F.A,QDialog:h.A,QSpinnerCube:_.A,QInput:A.A,QCardActions:V.A,QBtn:y.A,QSpace:U.A}),Q()(P,"directives",{ClosePopup:C.A});var B=l(4257),X=l(9855);const D={key:0},G={key:1},T={class:"absolute-top-right q-ma-sm"},j={style:{"max-width":"150px"},class:"q-mx-auto"},W=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1),z=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1),O=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1),$=(0,t.Lk)("td",{class:"text-italic text-caption"}," NIDN ",-1),H=(0,t.Lk)("td",{class:"text-italic text-caption"}," Prodi ",-1),J=(0,t.Lk)("td",{class:"text-italic text-caption"}," Kampus ",-1),M=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nomor Telepon ",-1),Y={class:""},Z={class:""},ee={class:"fit row wrap justify-start items-start content-start"},ae={__name:"ProfileIndex",setup(e){const a=(0,n.KR)({}),l=(0,n.KR)(!1),i=(0,n.KR)(!1),r=(0,n.KR)(!1),m=(0,n.KR)(!1),c=e=>m.value=e,p=(0,B.A)();async function g(){m.value=!1,await v()}async function v(){const e=await(0,u.A)({endPoint:"user",loading:l});e&&(a.value=e.user,p.updateUser(e.user))}(0,t.sV)((async()=>{await v()}));const k=async()=>{await(0,d.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,u)=>{const d=(0,t.g2)("q-spinner-cube"),p=(0,t.g2)("q-btn"),f=(0,t.g2)("q-img"),x=(0,t.g2)("q-item-label"),q=(0,t.g2)("q-item-section"),w=(0,t.g2)("q-item"),F=(0,t.g2)("q-toggle"),h=(0,t.g2)("q-list"),_=(0,t.g2)("q-card-section"),A=(0,t.g2)("q-card"),V=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(A,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(X.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Profil Pengguna")])),_:1}),(0,t.bF)(_,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",D,[(0,t.bF)(d,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",G,[(0,t.Lk)("div",null,[(0,t.Lk)("div",T,[(0,t.bF)(p,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:u[0]||(u[0]=e=>m.value=!0)})]),(0,t.Lk)("div",j,[(0,t.bF)(f,{src:a.value?.avatar_url?a.value.avatar_url:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"brown-6",borderStyle:"solid"}},null,8,["src"])])]),(0,t.bF)(h,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(w,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(x,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User")])),_:1}),(0,t.bF)(x,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",null,[W,(0,t.Lk)("td",null,(0,s.v_)(a.value?.prefix)+" "+(0,s.v_)(a.value.name)+(0,s.v_)(a.value?.suffix?", "+a.value.suffix:""),1)]),(0,t.Lk)("tr",null,[z,(0,t.Lk)("td",null,(0,s.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[O,(0,t.Lk)("td",null,(0,s.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[$,(0,t.Lk)("td",null,(0,s.v_)(a.value.nidn||"-"),1)]),(0,t.Lk)("tr",null,[H,(0,t.Lk)("td",null,(0,s.v_)(a.value.prodi||"-"),1)]),(0,t.Lk)("tr",null,[J,(0,t.Lk)("td",null,(0,s.v_)(a.value.nama_kampus||"-"),1)]),(0,t.Lk)("tr",null,[M,(0,t.Lk)("td",null,(0,s.v_)(a.value.phone||"-"),1)])])])),_:1}),(0,t.bF)(x,{class:"bg-brown-1 flex items-center justify-between"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Y,[(0,t.bF)(p,{label:"Profil",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:u[1]||(u[1]=e=>r.value=!0)})]),(0,t.Lk)("div",Z,[(0,t.bF)(p,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:u[2]||(u[2]=e=>i.value=!0)}),(0,t.bF)(p,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:k})])])),_:1})])),_:1})])),_:1}),(0,t.bF)(w,{class:"q-pa-sm bg-brown-1"},{default:(0,t.k6)((()=>[(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(x,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User Group")])),_:1}),(0,t.bF)(x,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",ee,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(F,{"model-value":e,color:"brown-7",label:(0,n.R1)(o.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(V,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=e=>i.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(I,{"is-new":!1,data:a.value,onSuccessSubmit:v},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(V,{modelValue:r.value,"onUpdate:modelValue":u[4]||(u[4]=e=>r.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(E,{"is-new":!1,data:a.value,onSuccessSubmit:v},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(b,{"show-uploader":m.value,url:"/user/avatar",width:300,height:300,fieldImage:"avatar","img-format":"webp",onUpdateUploader:c,onSuccessUpload:g},null,8,["show-uploader"])],64)}}};var le=l(7472),te=l(3766),se=l(2589),ne=l(4958),ue=l(9039),oe=l(5725);const de=ae,ie=de;Q()(ae,"components",{QCard:q.A,QCardSection:F.A,QSpinnerCube:_.A,QBtn:y.A,QImg:le.A,QList:te.A,QItem:se.A,QItemSection:ne.A,QItemLabel:ue.A,QToggle:oe.A,QDialog:h.A})}}]);