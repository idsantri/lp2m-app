"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[992],{783:(e,a,l)=>{function t(e){return e.split(" ").map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" ")}function n(e){return e.split("-").map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" ")}l.d(a,{Zj:()=>n,nx:()=>t})},3992:(e,a,l)=>{l.r(a),l.d(a,{default:()=>M});var t=l(1347),n=l(7763),o=l(4187),s=l(8633),u=l(8094),i=l(7509),r=l(783),d=l(5469),c=l(2010),p=l(1131),m=l(651);const b={__name:"ImageUploader",props:{width:{type:Number,default:450},height:{type:Number,default:600},showUploader:{type:Boolean,default:!1},url:{default:null},imgFormat:{type:String,default:"png"}},emits:["updateUploader","successUpload"],setup(e,{emit:a}){const l=e,n=a,s=(0,o.KR)(!1);(0,t.wB)((()=>l.showUploader),(e=>{s.value=e})),(0,t.$u)((()=>{n("updateUploader",s.value)}));const u={hint:"Klik atau tarik file gambar ke sini untuk upload",loading:"Uploadingâ€¦",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload berhasil",fail:"Upload gagal",preview:"Preview",btn:{off:"Gagal",close:"Tutup",back:"Kembali",save:"Simpan"},error:{onlyImg:"Hanya gambar",outOfSize:"Gambar melebihi batas ukuran: ",lowestPx:"Ukuran gambar terlalu rendah. Setidaknya diharapkan: "}},i=(0,o.KR)(""),r={},b=e=>{i.value=e},g=e=>{(0,d.VX)(e.message),n("successUpload")},f=(e,a)=>{console.log("upload status",e),console.log("upload field",a),401==e&&(0,d.UG)("Akses ditolak!")};return(e,a)=>((0,t.uX)(),(0,t.Wv)((0,o.R1)(c.A),{field:"image",langType:"en",langExt:u,"no-circle":"",onCropSuccess:b,onCropUploadSuccess:g,onCropUploadFail:f,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),width:l.width,height:l.height,url:(0,o.R1)(p.A).defaults.baseURL+l.url,params:r,headers:{Authorization:`Bearer ${(0,o.R1)(m.A)()}`},withCredentials:"","img-format":l.imgFormat},null,8,["modelValue","width","height","url","headers","img-format"]))}},g=b,f=g,v={class:"flex items-center"},k=(0,t.Lk)("div",{class:"text-subtitle2"},"Profil Pengguna",-1),y={key:0},h={key:1},w={class:"absolute-top-right q-ma-sm"},x={style:{"max-width":"150px"},class:"q-mx-auto"},q=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1),A=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1),F=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1),U=(0,t.Lk)("td",{class:"text-italic text-caption"}," Telepon ",-1),_={class:""},C={class:""},L={class:"fit row wrap justify-start items-start content-start"},Q={key:0},P={__name:"ProfileIndex",setup(e){const a=(0,o.KR)({}),l=(0,o.KR)(!1),c=(0,o.KR)(!1),p=(0,o.KR)(!1),m=(0,o.KR)({}),b=(0,o.KR)(!1),g=e=>b.value=e;async function P(){b.value=!1,await loadImage()}async function V(){const e=await(0,u.A)({endPoint:"user",loading:l});a.value=e.user}async function R(){const e=await(0,i.A)({endPoint:"user",data:{username:m.value.username},confirm:!0,notify:!0,loading:p});e&&(document.getElementById("btn-close").click(),await V())}function S(){Object.assign(m.value,a.value),c.value=!0}(0,t.sV)((async()=>{await V()}));const I=async()=>{await(0,d.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,u)=>{const i=(0,t.g2)("q-space"),d=(0,t.g2)("q-card-section"),V=(0,t.g2)("q-spinner-cube"),K=(0,t.g2)("q-btn"),j=(0,t.g2)("q-img"),E=(0,t.g2)("q-item-label"),X=(0,t.g2)("q-item-section"),$=(0,t.g2)("q-item"),T=(0,t.g2)("q-toggle"),B=(0,t.g2)("q-list"),G=(0,t.g2)("q-card"),W=(0,t.g2)("q-dialog"),z=(0,t.g2)("q-input"),N=(0,t.g2)("q-card-actions"),O=(0,t.g2)("q-form"),D=(0,t.g2)("q-page"),J=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(D,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(G,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"bg-brown-7 text-brown-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",v,[k,(0,t.bF)(i)])])),_:1}),(0,t.bF)(d,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",y,[(0,t.bF)(V,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",h,[(0,t.Lk)("div",null,[(0,t.Lk)("div",w,[(0,t.bF)(K,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:u[0]||(u[0]=e=>b.value=!0)})]),(0,t.Lk)("div",x,[(0,t.bF)(j,{src:a.value.image,ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"brown-6",borderStyle:"solid"}},null,8,["src"])])]),(0,t.bF)(B,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(X,null,{default:(0,t.k6)((()=>[(0,t.bF)(E,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User")])),_:1}),(0,t.bF)(E,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",null,[q,(0,t.Lk)("td",null,(0,n.v_)(a.value.name),1)]),(0,t.Lk)("tr",null,[A,(0,t.Lk)("td",null,(0,n.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[F,(0,t.Lk)("td",null,(0,n.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[U,(0,t.Lk)("td",null,(0,n.v_)(a.value.phone||"-"),1)])])])),_:1}),(0,t.bF)(E,{class:"bg-brown-1 flex items-center justify-between"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",_,[(0,t.bF)(K,{label:"Profil",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:S})]),(0,t.Lk)("div",C,[(0,t.bF)(K,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:S}),(0,t.bF)(K,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:I})])])),_:1})])),_:1})])),_:1}),(0,t.bF)($,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(X,null,{default:(0,t.k6)((()=>[(0,t.bF)(E,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User Group")])),_:1}),(0,t.bF)(E,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",L,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(T,{"model-value":e,color:"brown-9",label:(0,o.R1)(r.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(W,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(G,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(O,{onSubmit:(0,s.D$)(R,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"bg-brown-7 text-brown-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.eW)(" Update Username ")])),_:1}),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[p.value?((0,t.uX)(),(0,t.CE)("div",Q,[(0,t.bF)(W,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=e=>p.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(V,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(z,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:m.value.username,"onUpdate:modelValue":u[2]||(u[2]=e=>m.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"])])),_:1}),(0,t.bF)(N,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bF)(i),(0,t.bo)((0,t.bF)(K,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close"},null,512),[[J]]),(0,t.bF)(K,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(f,{"show-uploader":b.value,url:`/images/users/${a.value.id}`,width:300,height:300,"img-format":"webp",onUpdateUploader:g,onSuccessUpload:P},null,8,["show-uploader","url"])])),_:1})}}};var V=l(5013),R=l(3341),S=l(222),I=l(5873),K=l(1402),j=l(2677),E=l(7472),X=l(3766),$=l(2589),T=l(4958),B=l(9039),G=l(5725),W=l(45),z=l(3417),N=l(6067),O=l(5034),D=l(1038),J=l(272),H=l.n(J);const Z=P,M=Z;H()(P,"components",{QPage:V.A,QCard:R.A,QCardSection:S.A,QSpace:I.A,QSpinnerCube:K.A,QBtn:j.A,QImg:E.A,QList:X.A,QItem:$.A,QItemSection:T.A,QItemLabel:B.A,QToggle:G.A,QDialog:W.A,QForm:z.A,QInput:N.A,QCardActions:O.A}),H()(P,"directives",{ClosePopup:D.A})},4280:(e,a,l)=>{l.d(a,{A:()=>u});var t=l(9100),n=l(9463),o=l(5469);function s(e){var a,l,s,u,i,r,d;if(t.A.isAxiosError(e))if(e.response){const t=null===(a=e.response.data)||void 0===a?void 0:a.message;t?(0,o.UG)((0,n.KJ)(t)):console.log(`Response error during ${null===(s=null===(l=e.config)||void 0===l?void 0:l.method)||void 0===s?void 0:s.toUpperCase()} ${null===(u=e.config)||void 0===u?void 0:u.url}`,e)}else console.error(`General error during ${null===(r=null===(i=e.config)||void 0===i?void 0:i.method)||void 0===r?void 0:r.toUpperCase()} ${null===(d=e.config)||void 0===d?void 0:d.url}`,e);else console.error("Unexpected error: ",e)}const u=s},7509:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(1131),n=l(4280),o=l(5469),s=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{i(t.next(e))}catch(a){o(a)}}function u(e){try{i(t["throw"](e))}catch(a){o(a)}}function i(e){e.done?l(e.value):n(e.value).then(s,u)}i((t=t.apply(e,a||[])).next())}))};function u(e){return s(this,arguments,void 0,(function*({endPoint:e,data:a,confirm:l=!0,message:s="Update data ini?",loading:u,notify:i=!0,params:r}){if(l){const e=yield(0,o.Ix)(s,!0);if(!e)return!1}try{u&&"boolean"===typeof u.value&&(u.value=!0);const l=yield t.A.put(e,a,{params:r});return i&&(0,o.VX)(l.data.message),l.data}catch(d){return(0,n.A)(d),!1}finally{u&&"boolean"===typeof u.value&&(u.value=!1)}}))}const i=u},8094:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(1131),n=l(4280),o=l(5469),s=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{i(t.next(e))}catch(a){o(a)}}function u(e){try{i(t["throw"](e))}catch(a){o(a)}}function i(e){e.done?l(e.value):n(e.value).then(s,u)}i((t=t.apply(e,a||[])).next())}))};function u(e){return s(this,arguments,void 0,(function*({endPoint:e,loading:a,params:l,notify:s=!1}){try{a&&"boolean"===typeof a.value&&(a.value=!0);const{data:n}=yield t.A.get(e,{params:l});return s&&(0,o.VX)(n.message),n}catch(u){return(0,n.A)(u),!1}finally{a&&"boolean"===typeof a.value&&(a.value=!1)}}))}const i=u},9463:(e,a,l)=>{l.d(a,{$r:()=>t,KJ:()=>o});const t=e=>{let a=[];return Array.isArray(e)?a=e:"object"===typeof e?a=Object.keys(e).map((a=>e[a])):a.push(e),a};const n=e=>Array.isArray(e)&&e.every((e=>"object"!==typeof e));function o(e){let a="";return n(e)?(a='<ul style="padding:0; padding-left:8px; min-width:250px;max-width:400px">',a+=e.map((e=>`<li>${e}</li>`)).join(""),a+="</ul>"):a=e,a}}}]);