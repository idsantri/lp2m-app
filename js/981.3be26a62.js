"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[981],{783:(e,a,l)=>{function t(e){return e.split(" ").map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" ")}function n(e){return e.split("-").map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" ")}l.d(a,{Zj:()=>n,nx:()=>t})},4280:(e,a,l)=>{l.d(a,{A:()=>u});var t=l(9100),n=l(9463),o=l(5469);function s(e){var a,l,s,u,i,r,d;if(t.A.isAxiosError(e))if(e.response){const t=null===(a=e.response.data)||void 0===a?void 0:a.message;t?(0,o.UG)((0,n.KJ)(t)):console.log(`Response error during ${null===(s=null===(l=e.config)||void 0===l?void 0:l.method)||void 0===s?void 0:s.toUpperCase()} ${null===(u=e.config)||void 0===u?void 0:u.url}`,e)}else console.error(`General error during ${null===(r=null===(i=e.config)||void 0===i?void 0:i.method)||void 0===r?void 0:r.toUpperCase()} ${null===(d=e.config)||void 0===d?void 0:d.url}`,e);else console.error("Unexpected error: ",e)}const u=s},6981:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ie});var t=l(1347),n=l(7763),o=l(4187),s=l(8094),u=l(783),i=l(5469),r=l(2010),d=l(1131),c=l(651);const p={__name:"ImageUploader",props:{width:{type:Number,default:450},height:{type:Number,default:600},showUploader:{type:Boolean,default:!1},url:{default:null},imgFormat:{type:String,default:"png"},fieldImage:{type:String,default:"image"}},emits:["updateUploader","successUpload"],setup(e,{emit:a}){const l=e,n=a,s=(0,o.KR)(!1);(0,t.wB)((()=>l.showUploader),(e=>{s.value=e})),(0,t.$u)((()=>{n("updateUploader",s.value)}));const u={hint:"Klik atau tarik file gambar ke sini untuk upload",loading:"Uploadingâ€¦",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload berhasil",fail:"Upload gagal",preview:"Preview",btn:{off:"Gagal",close:"Tutup",back:"Kembali",save:"Simpan"},error:{onlyImg:"Hanya gambar",outOfSize:"Gambar melebihi batas ukuran: ",lowestPx:"Ukuran gambar terlalu rendah. Setidaknya diharapkan: "}},p=(0,o.KR)(""),m={},b=e=>{p.value=e},g=e=>{(0,i.VX)(e.message),n("successUpload")},v=(e,a)=>{console.log("upload status",e),console.log("upload field",a),401==e&&(0,i.UG)("Akses ditolak!")};return(a,n)=>((0,t.uX)(),(0,t.Wv)((0,o.R1)(r.A),{field:e.fieldImage,langType:"en",langExt:u,"no-circle":"",onCropSuccess:b,onCropUploadSuccess:g,onCropUploadFail:v,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),width:l.width,height:l.height,url:(0,o.R1)(d.A).defaults.baseURL+l.url,params:m,headers:{Authorization:`Bearer ${(0,o.R1)(c.A)()}`},withCredentials:"","img-format":l.imgFormat},null,8,["field","modelValue","width","height","url","headers","img-format"]))}},m=p,b=m;var g=l(8633),v=l(7509),f=l(9987);const k={key:0},x={__name:"CardUsername",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,s=(0,o.KR)({}),u=(0,o.KR)(!1);async function i(){const e={username:s.value.username},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:u});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(s.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),o=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-btn"),c=(0,t.g2)("q-space"),p=(0,t.g2)("q-card-actions"),m=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{onSubmit:(0,g.D$)(i,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.A,{title:"Update Username","is-new":!1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[u.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(n,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:s.value.username,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(c),(0,t.bo)((0,t.bF)(d,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(d,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var h=l(3341),w=l(3417),y=l(222),q=l(45),A=l(1402),F=l(6067),U=l(5034),_=l(2677),V=l(5873),C=l(1038),L=l(272),Q=l.n(L);const S=x,P=S;Q()(x,"components",{QCard:h.A,QForm:w.A,QCardSection:y.A,QDialog:q.A,QSpinnerCube:A.A,QInput:F.A,QCardActions:U.A,QBtn:_.A,QSpace:V.A}),Q()(x,"directives",{ClosePopup:C.A});const I={key:0},R={__name:"CardProfile",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,s=(0,o.KR)({}),u=(0,o.KR)(!1);async function i(){const e={prefix:s.value.prefix,name:s.value.name,suffix:s.value.suffix,nidn:s.value.nidn,prodi:s.value.prodi,phone:s.value.phone},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:u});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(s.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),o=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-btn"),c=(0,t.g2)("q-space"),p=(0,t.g2)("q-card-actions"),m=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{onSubmit:(0,g.D$)(i,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.A,{title:"Update Profil","is-new":!1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[u.value?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.bF)(n,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Awalan",modelValue:s.value.prefix,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.prefix=e),hint:"Gelar akademis"},null,8,["modelValue"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Nama Lengkap",modelValue:s.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.name=e),hint:""},null,8,["modelValue"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Akhiran",modelValue:s.value.suffix,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.suffix=e),hint:"Gelar akademis"},null,8,["modelValue"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"NIDN",modelValue:s.value.nidn,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.nidn=e),hint:"Nomor Induk Dosen Nasional"},null,8,["modelValue"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Prodi",modelValue:s.value.prodi,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.prodi=e),hint:""},null,8,["modelValue"]),(0,t.bF)(o,{class:"q-mt-sm",dense:"",outlined:"",label:"Nomor Telepon",modelValue:s.value.phone,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.phone=e),hint:"08123456789"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(c),(0,t.bo)((0,t.bF)(d,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(d,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}},K=R,N=K;Q()(R,"components",{QCard:h.A,QForm:w.A,QCardSection:y.A,QDialog:q.A,QSpinnerCube:A.A,QInput:F.A,QCardActions:U.A,QBtn:_.A,QSpace:V.A}),Q()(R,"directives",{ClosePopup:C.A});const j={class:"flex items-center"},X=(0,t.Lk)("div",{class:"text-subtitle2"},"Profil Pengguna",-1),E={key:0},B={key:1},D={class:"absolute-top-right q-ma-sm"},G={style:{"max-width":"150px"},class:"q-mx-auto"},$=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1),T=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1),W=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1),O=(0,t.Lk)("td",{class:"text-italic text-caption"}," NIDN ",-1),z=(0,t.Lk)("td",{class:"text-italic text-caption"}," Prodi ",-1),H=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nomor Telepon ",-1),J={class:""},Z={class:""},M={class:"fit row wrap justify-start items-start content-start"},Y={__name:"ProfileIndex",setup(e){const a=(0,o.KR)({}),l=(0,o.KR)(!1),r=(0,o.KR)(!1),d=(0,o.KR)(!1),c=(0,o.KR)(!1),p=e=>c.value=e;async function m(){c.value=!1,await g()}async function g(){const e=await(0,s.A)({endPoint:"user",loading:l});a.value=e.user}(0,t.sV)((async()=>{await g()}));const v=async()=>{await(0,i.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,s)=>{const i=(0,t.g2)("q-space"),f=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-spinner-cube"),x=(0,t.g2)("q-btn"),h=(0,t.g2)("q-img"),w=(0,t.g2)("q-item-label"),y=(0,t.g2)("q-item-section"),q=(0,t.g2)("q-item"),A=(0,t.g2)("q-toggle"),F=(0,t.g2)("q-list"),U=(0,t.g2)("q-card"),_=(0,t.g2)("q-dialog"),V=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(V,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"bg-brown-7 text-brown-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",j,[X,(0,t.bF)(i)])])),_:1}),(0,t.bF)(f,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",E,[(0,t.bF)(k,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",B,[(0,t.Lk)("div",null,[(0,t.Lk)("div",D,[(0,t.bF)(x,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:s[0]||(s[0]=e=>c.value=!0)})]),(0,t.Lk)("div",G,[(0,t.bF)(h,{src:a.value?.avatar?a.value.avatar:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"brown-6",borderStyle:"solid"}},null,8,["src"])])]),(0,t.bF)(F,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(w,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User")])),_:1}),(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",null,[$,(0,t.Lk)("td",null,(0,n.v_)(a.value.prefix)+" "+(0,n.v_)(a.value.name)+(0,n.v_)(a.value.suffix?", "+a.value.suffix:""),1)]),(0,t.Lk)("tr",null,[T,(0,t.Lk)("td",null,(0,n.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[W,(0,t.Lk)("td",null,(0,n.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[O,(0,t.Lk)("td",null,(0,n.v_)(a.value.nidn||"-"),1)]),(0,t.Lk)("tr",null,[z,(0,t.Lk)("td",null,(0,n.v_)(a.value.prodi||"-"),1)]),(0,t.Lk)("tr",null,[H,(0,t.Lk)("td",null,(0,n.v_)(a.value.phone||"-"),1)])])])),_:1}),(0,t.bF)(w,{class:"bg-brown-1 flex items-center justify-between"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",J,[(0,t.bF)(x,{label:"Profil",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:s[1]||(s[1]=e=>d.value=!0)})]),(0,t.Lk)("div",Z,[(0,t.bF)(x,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:s[2]||(s[2]=e=>r.value=!0)}),(0,t.bF)(x,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:v})])])),_:1})])),_:1})])),_:1}),(0,t.bF)(q,{class:"q-pa-sm bg-brown-1"},{default:(0,t.k6)((()=>[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(w,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User Group")])),_:1}),(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",M,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(A,{"model-value":e,color:"brown-7",label:(0,o.R1)(u.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(_,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=e=>r.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(P,{"is-new":!1,data:a.value,onSuccessSubmit:g},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(_,{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=e=>d.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(N,{"is-new":!1,data:a.value,onSuccessSubmit:g},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(b,{"show-uploader":c.value,url:"/user/avatar",width:300,height:300,fieldImage:"avatar","img-format":"webp",onUpdateUploader:p,onSuccessUpload:m},null,8,["show-uploader"])])),_:1})}}};var ee=l(5013),ae=l(7472),le=l(3766),te=l(2589),ne=l(4958),oe=l(9039),se=l(5725);const ue=Y,ie=ue;Q()(Y,"components",{QPage:ee.A,QCard:h.A,QCardSection:y.A,QSpace:V.A,QSpinnerCube:A.A,QBtn:_.A,QImg:ae.A,QList:le.A,QItem:te.A,QItemSection:ne.A,QItemLabel:oe.A,QToggle:se.A,QDialog:q.A})},7509:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(1131),n=l(4280),o=l(5469),s=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{i(t.next(e))}catch(a){o(a)}}function u(e){try{i(t["throw"](e))}catch(a){o(a)}}function i(e){e.done?l(e.value):n(e.value).then(s,u)}i((t=t.apply(e,a||[])).next())}))};function u(e){return s(this,arguments,void 0,(function*({endPoint:e,data:a,confirm:l=!0,message:s="Update data ini?",loading:u,notify:i=!0,params:r}){if(l){const e=yield(0,o.Ix)(s,!0);if(!e)return!1}try{u&&"boolean"===typeof u.value&&(u.value=!0);const l=yield t.A.put(e,a,{params:r});return i&&(0,o.VX)(l.data.message),l.data}catch(d){return(0,n.A)(d),!1}finally{u&&"boolean"===typeof u.value&&(u.value=!1)}}))}const i=u},8094:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(1131),n=l(4280),o=l(5469),s=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,o){function s(e){try{i(t.next(e))}catch(a){o(a)}}function u(e){try{i(t["throw"](e))}catch(a){o(a)}}function i(e){e.done?l(e.value):n(e.value).then(s,u)}i((t=t.apply(e,a||[])).next())}))};function u(e){return s(this,arguments,void 0,(function*({endPoint:e,loading:a,params:l,notify:s=!1}){try{a&&"boolean"===typeof a.value&&(a.value=!0);const{data:n}=yield t.A.get(e,{params:l});return s&&(0,o.VX)(n.message),n}catch(u){return(0,n.A)(u),!1}finally{a&&"boolean"===typeof a.value&&(a.value=!1)}}))}const i=u},9463:(e,a,l)=>{l.d(a,{$r:()=>t,KJ:()=>o});const t=e=>{let a=[];return Array.isArray(e)?a=e:"object"===typeof e?a=Object.keys(e).map((a=>e[a])):a.push(e),a};const n=e=>Array.isArray(e)&&e.every((e=>"object"!==typeof e));function o(e){let a="";return n(e)?(a='<ul style="padding:0; padding-left:8px; min-width:250px;max-width:400px">',a+=e.map((e=>`<li>${e}</li>`)).join(""),a+="</ul>"):a=e,a}}}]);