"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[695],{5695:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Ee});var t=l(1347),n=l(7763),s=l(4187),u=l(8094),o=l(455),i=l(1099),r=l(2411),d=l(5902),c=l(6234);function p(e,a){try{return(0,d.GP)(new Date(e),a,{locale:c.id})}catch(l){return"Invalid Date"}}var v=l(8633),m=l(7509),b=l(9987),k=l(1265),_=l(8552);const g={key:0},f={__name:"CrudPenelitianSetup",props:{data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,o=(0,s.KR)({}),i=(0,s.KR)(!1),r=(0,s.KR)(!1),d=(0,s.KR)([]);async function c(){const e={status_proposal:o.value.status_proposal,status_laporan:o.value.status_laporan,periode:o.value.periode,reviewer_user_id:o.value.reviewer_user_id},a=await(0,m.A)({endPoint:`penelitian/${o.value.id}/setup`,data:e,confirm:!0,notify:!0,loading:i});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a.penelitian))}return(0,t.sV)((async()=>{Object.assign(o.value,l.data);const e=await(0,u.A)({endPoint:"users?role=reviewer",loading:r});e&&(d.value=e.users)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),s=(0,t.g2)("q-select"),u=(0,t.g2)("q-card-section"),p=(0,t.g2)("q-form"),m=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(m,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{onSubmit:(0,v.D$)(c,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(b.A,{title:"Setup Penelitian","is-new":!1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[i.value?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(n,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(_.A,{modelValue:o.value.periode,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.periode=e),url:"periode",label:"Periode",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(_.A,{modelValue:o.value.status_proposal,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.status_proposal=e),url:"status-proposal",label:"Status Proposal",class:"q-mt-sm",clearable:""},null,8,["modelValue"]),(0,t.bF)(_.A,{modelValue:o.value.status_laporan,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.status_laporan=e),url:"status-laporan",label:"Status Laporan",class:"q-mt-sm",clearable:""},null,8,["modelValue"]),(0,t.bF)(s,{dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"name",options:d.value,loading:r.value,behavior:"menu",clearable:"",modelValue:o.value.reviewer_user_id,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.reviewer_user_id=e),label:"Reviewer",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["options","loading","modelValue","rules"])])),_:1}),(0,t.bF)(k.A,{"btn-delete":!1,onOnDelete:e=>null})])),_:1})])),_:1})}}};var q=l(3341),w=l(3417),F=l(222),y=l(45),A=l(1402),L=l(4611),V=l(272),Q=l.n(V);const C=f,x=C;Q()(f,"components",{QCard:q.A,QForm:w.A,QCardSection:F.A,QDialog:y.A,QSpinnerCube:A.A,QSelect:L.A});const h=e=>((0,t.Qi)("data-v-842a8320"),e=e(),(0,t.jt)(),e),P={key:0},S={key:1},R={class:"text-subtitle1 q-px-md bg-brown-1 flex justify-between items-center q-py-sm"},K=h((()=>(0,t.Lk)("div",null,null,-1))),X=h((()=>(0,t.Lk)("td",{class:"label"},"Tanggal Buat",-1))),D={class:""},U=h((()=>(0,t.Lk)("td",{class:"label"},"Peneliti",-1))),W={class:""},E=h((()=>(0,t.Lk)("td",{class:"label"},"Judul",-1))),T={class:"text-weight-medium"},$=h((()=>(0,t.Lk)("td",{class:"label"},"Deskripsi",-1))),I={class:""},M=h((()=>(0,t.Lk)("td",{class:"label"},"Anggota",-1))),j={class:""},B={class:"text-subtitle1 q-px-md bg-brown-1 flex justify-between items-center q-py-sm"},O=h((()=>(0,t.Lk)("div",null,null,-1))),z=h((()=>(0,t.Lk)("td",{class:"label"},"Periode",-1))),H={class:""},G=h((()=>(0,t.Lk)("td",{class:"label"},"Status Proposal",-1))),J={class:""},N=h((()=>(0,t.Lk)("td",{class:"label"},"Status Laporan",-1))),Y={class:""},Z=h((()=>(0,t.Lk)("td",{class:"label"},"Reviewer",-1))),ee={class:""},ae={__name:"DetailPenelitianId",setup(e){const{params:a}=(0,o.lq)(),l=(0,s.KR)(!1),d=(0,s.KR)({}),c=(0,s.KR)(!1),v=(0,s.KR)(!1);async function m(){const e=await(0,u.A)({endPoint:`penelitian/${a.id}`,loading:l});e&&(d.value=e.penelitian)}return(0,t.sV)((async()=>{await m()})),(e,a)=>{const u=(0,t.g2)("q-btn"),o=(0,t.g2)("q-spinner-cube"),b=(0,t.g2)("RouterLink"),k=(0,t.g2)("q-markup-table"),_=(0,t.g2)("q-separator"),g=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-card"),q=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(f,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(i.A,null,{action:(0,t.k6)((()=>[(0,t.bF)(u,{"no-caps":"",icon:"sync",dense:"",class:"q-px-sm q-mr-sm",outline:"",onClick:m})])),default:(0,t.k6)((()=>[(0,t.eW)("Detail Penelitian ")])),_:1}),(0,t.bF)(g,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",P,[(0,t.bF)(o,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",S,[(0,t.Lk)("div",R,[K,(0,t.bF)(u,{label:"Edit","no-caps":"",icon:"edit",dense:"",class:"q-px-sm",outline:"",onClick:a[0]||(a[0]=e=>c.value=!0)})]),(0,t.bF)(k,{flat:"","wrap-cells":""},{default:(0,t.k6)((()=>[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[X,(0,t.Lk)("td",D,(0,n.v_)((0,s.R1)(p)(d.value.created_at,"dd MMMM yyyy")),1)]),(0,t.Lk)("tr",null,[U,(0,t.Lk)("td",W,[(0,t.bF)(b,{to:`/settings/users/${d.value.user_id}`},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(d.value.user_name),1)])),_:1},8,["to"])])]),(0,t.Lk)("tr",null,[E,(0,t.Lk)("td",T,(0,n.v_)(d.value.judul),1)]),(0,t.Lk)("tr",null,[$,(0,t.Lk)("td",I,(0,n.v_)(d.value.deskripsi),1)]),(0,t.Lk)("tr",null,[M,(0,t.Lk)("td",j,(0,n.v_)(d.value.anggota),1)])])])),_:1}),(0,t.bF)(_,{class:"q-my-md"}),(0,t.Lk)("div",B,[O,(0,t.bF)(u,{label:"Atur","no-caps":"",icon:"tune",dense:"",class:"q-px-sm",outline:"",onClick:a[1]||(a[1]=e=>v.value=!0)})]),(0,t.bF)(k,{flat:"","wrap-cells":""},{default:(0,t.k6)((()=>[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[z,(0,t.Lk)("td",H,(0,n.v_)(d.value.periode),1)]),(0,t.Lk)("tr",null,[G,(0,t.Lk)("td",J,(0,n.v_)(d.value.status_proposal),1)]),(0,t.Lk)("tr",null,[N,(0,t.Lk)("td",Y,(0,n.v_)(d.value.status_laporan),1)]),(0,t.Lk)("tr",null,[Z,(0,t.Lk)("td",ee,[(0,t.bF)(b,{to:`/settings/users/${d.value.reviewer_user_id}`},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(d.value.reviewer_user_name),1)])),_:1},8,["to"])])])])])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(q,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(r.A,{data:d.value,onSuccessSubmit:a[2]||(a[2]=e=>d.value=e),onSuccessDelete:a[3]||(a[3]=a=>e.$router.push("/user/penelitian"))},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(q,{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=e=>v.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(x,{data:d.value,onSuccessSubmit:a[5]||(a[5]=e=>d.value=e),onSuccessDelete:e=>null},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var le=l(2968),te=l(2677),ne=l(4362),se=l(6915);const ue=(0,le.A)(ae,[["__scopeId","data-v-842a8320"]]),oe=ue;Q()(ae,"components",{QCard:q.A,QBtn:te.A,QCardSection:F.A,QSpinnerCube:A.A,QMarkupTable:ne.A,QSeparator:se.A,QDialog:y.A});const ie={__name:"InputFile",setup(e){return(e,a)=>{const l=(0,t.g2)("q-icon"),n=(0,t.g2)("q-btn"),s=(0,t.g2)("q-file");return(0,t.uX)(),(0,t.Wv)(s,{label:"Pilih File",dense:"",outlined:"",accept:".pdf",name:"file",clearable:"",loading:e.$props.loading,disable:e.$props.loading},{prepend:(0,t.k6)((()=>[(0,t.bF)(l,{name:"attach_file"})])),after:(0,t.k6)((()=>[(0,t.bF)(n,{dense:"",outline:"",icon:"send",class:"q-pa-sm",color:"primary",onClick:a[0]||(a[0]=a=>e.$emit("onUpload"))})])),_:1},8,["loading","disable"])}}};var re=l(8002),de=l(3933);const ce=ie,pe=ce;Q()(ie,"components",{QFile:re.A,QIcon:de.A,QBtn:te.A});var ve=l(9678),me=l(675);const be={class:"bg-brown-11 q-pa-sm flex items-center justify-between"},ke={class:"text-subtitle1 q-ml-sm"},_e={key:0},ge={key:1},fe=["href"],qe={__name:"TemplateReview",props:{variant:{type:String,required:!0}},setup(e){const a=e,l=(0,s.KR)([]),{params:i}=(0,o.lq)(),r=(0,s.KR)(!1),d=(0,s.KR)(!1),c=(0,s.KR)(!1),v=(0,s.KR)(null),m=async()=>{const e=await(0,u.A)({endPoint:"penelitian-review",params:{penelitian_id:i.id,type:a.variant},loading:r});e&&(l.value=e.review)};(0,t.sV)((async()=>{await m()}));const b=async()=>{const e=v.value;if(!e)return void notifyError("Pilih file "+a.variant+" terlebih dahulu!");const l=new FormData;l.append("file",e);const t=await(0,ve.A)({endPoint:"penelitian-review/upload",data:l,loading:d,config:{headers:{"Content-Type":"multipart/form-data"},params:{penelitian_id:i.id,type:a.variant}}});t&&(c.value=!1,v.value=null,await m())},k=async({id:e})=>{const a=await(0,me.A)({endPoint:`penelitian-review/${e}`,loading:r,message:'<span style="color: red">Hapus file ini?</span>'});a&&await m()};return(a,u)=>{const o=(0,t.g2)("q-btn"),i=(0,t.g2)("q-spinner-cube"),m=(0,t.g2)("q-item-section"),_=(0,t.g2)("q-item-label"),g=(0,t.g2)("q-item"),f=(0,t.g2)("q-list"),q=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",be,[(0,t.Lk)("div",ke," Riwayat "+(0,n.v_)(e.variant?.toUpperCase()),1),(0,t.bF)(o,{"no-caps":"",label:"Upload File",icon:"add",dense:"",class:"q-px-md q-mr-sm",outline:"",onClick:u[0]||(u[0]=e=>c.value=!c.value)})]),r.value?((0,t.uX)(),(0,t.CE)("div",_e,[(0,t.bF)(i,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",ge,[c.value?((0,t.uX)(),(0,t.Wv)(pe,{key:0,class:"q-mt-sm",label:"Pilih file "+e.variant,hint:"Hanya menerima file pdf",modelValue:v.value,"onUpdate:modelValue":u[1]||(u[1]=e=>v.value=e),onOnUpload:b,loading:d.value},null,8,["label","modelValue","loading"])):(0,t.Q3)("",!0),l.value?.length>0?((0,t.uX)(),(0,t.Wv)(f,{key:1,bordered:"",separator:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.value,((e,a)=>((0,t.uX)(),(0,t.Wv)(g,{key:a,separator:""},{default:(0,t.k6)((()=>[(0,t.bF)(m,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{icon:"delete",outline:"",color:"negative",glossy:"",onClick:a=>k(e)},null,8,["onClick"])])),_:2},1024),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(_,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)((0,s.R1)(p)(new Date(e.created_at),"dd MMMM yyyy")),1)])),_:2},1024),e.file?((0,t.uX)(),(0,t.Wv)(_,{key:0},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:e.file_url},(0,n.v_)(e.file.split("~").pop()),9,fe)])),_:2},1024)):(0,t.Q3)("",!0),(0,t.bF)(_,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.kesimpulan),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(m,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{label:"Review","no-caps":"",outline:"",glossy:"",to:`/penelitian-review/${e.id}`},null,8,["to"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):((0,t.uX)(),(0,t.Wv)(q,{key:2,flat:"",class:"text-negative text-center q-pa-lg"},{default:(0,t.k6)((()=>[(0,t.eW)(" Belum ada riwayat ")])),_:1}))]))],64)}}};var we=l(3766),Fe=l(2589),ye=l(4958),Ae=l(9039);const Le=qe,Ve=Le;Q()(qe,"components",{QBtn:te.A,QSpinnerCube:A.A,QList:we.A,QItem:Fe.A,QItemSection:ye.A,QItemLabel:Ae.A,QCard:q.A});const Qe={__name:"DetailPenelitianTabs",setup(e){const a=(0,s.KR)("proposal");return(e,l)=>{const n=(0,t.g2)("q-tab"),s=(0,t.g2)("q-tabs"),u=(0,t.g2)("q-tab-panel"),o=(0,t.g2)("q-tab-panels"),i=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),class:"text-brown-1 overflow-hidden bg-brown-7","active-color":"brown-1","active-bg-color":"brown-10","indicator-color":"brown-1",align:"left"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{name:"proposal",label:"Proposal","no-caps":""}),(0,t.bF)(n,{name:"laporan",label:"Laporan","no-caps":""})])),_:1},8,["modelValue"]),(0,t.bF)(o,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),class:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{name:"proposal",class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(Ve,{variant:"proposal"})])),_:1}),(0,t.bF)(u,{name:"laporan",class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(Ve,{variant:"laporan"})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var Ce=l(8805),xe=l(3467),he=l(990),Pe=l(9851);const Se=Qe,Re=Se;Q()(Qe,"components",{QCard:q.A,QTabs:Ce.A,QTab:xe.A,QTabPanels:he.A,QTabPanel:Pe.A});const Ke={class:"row",style:{"max-width":"1200px"}},Xe={class:"col-12 col-md-6 q-pa-sm"},De={class:"col-12 col-md-6 q-pa-sm"},Ue={__name:"DetailPenelitian",setup(e){return(e,a)=>((0,t.uX)(),(0,t.CE)("div",Ke,[(0,t.Lk)("div",Xe,[(0,t.bF)(oe)]),(0,t.Lk)("div",De,[(0,t.bF)(Re)])]))}},We=Ue,Ee=We}}]);