"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[337],{1337:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ke});var t=l(1347),n=l(7763),s=l(4187),o=l(8094),u=l(783),i=l(5469),r=l(2010),d=l(1131),c=l(651);const p={__name:"ImageUploader",props:{width:{type:Number,default:450},height:{type:Number,default:600},showUploader:{type:Boolean,default:!1},url:{default:null},imgFormat:{type:String,default:"png"},fieldImage:{type:String,default:"image"}},emits:["updateUploader","successUpload"],setup(e,{emit:a}){const l=e,n=a,o=(0,s.KR)(!1);(0,t.wB)((()=>l.showUploader),(e=>{o.value=e})),(0,t.$u)((()=>{n("updateUploader",o.value)}));const u={hint:"Klik atau tarik file gambar ke sini untuk upload",loading:"Uploadingâ€¦",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload berhasil",fail:"Upload gagal",preview:"Preview",btn:{off:"Gagal",close:"Tutup",back:"Kembali",save:"Simpan"},error:{onlyImg:"Hanya gambar",outOfSize:"Gambar melebihi batas ukuran: ",lowestPx:"Ukuran gambar terlalu rendah. Setidaknya diharapkan: "}},p=(0,s.KR)(""),m={},b=e=>{p.value=e},g=e=>{(0,i.VX)(e.message),n("successUpload")},v=(e,a)=>{console.log("upload status",e),console.log("upload field",a),401==e&&(0,i.UG)("Akses ditolak!")};return(a,n)=>((0,t.uX)(),(0,t.Wv)((0,s.R1)(r.A),{field:e.fieldImage,langType:"en",langExt:u,"no-circle":"",onCropSuccess:b,onCropUploadSuccess:g,onCropUploadFail:v,modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e),width:l.width,height:l.height,url:(0,s.R1)(d.A).defaults.baseURL+l.url,params:m,headers:{Authorization:`Bearer ${(0,s.R1)(c.A)()}`},withCredentials:"","img-format":l.imgFormat},null,8,["field","modelValue","width","height","url","headers","img-format"]))}},m=p,b=m;var g=l(8633),v=l(7509),f=l(9987);const k={key:0},q={__name:"CardUsername",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,o=(0,s.KR)({}),u=(0,s.KR)(!1);async function i(){const e={username:o.value.username},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:u});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(o.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),s=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-btn"),c=(0,t.g2)("q-space"),p=(0,t.g2)("q-card-actions"),m=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{onSubmit:(0,g.D$)(i,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.A,{title:"Update Username","is-new":!1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[u.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(n,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:o.value.username,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(c),(0,t.bo)((0,t.bF)(d,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(d,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}};var w=l(3341),h=l(3417),x=l(222),F=l(45),y=l(1402),A=l(6395),_=l(5034),S=l(2677),U=l(5873),V=l(1038),Q=l(272),C=l.n(Q);const L=q,R=L;C()(q,"components",{QCard:w.A,QForm:h.A,QCardSection:x.A,QDialog:F.A,QSpinnerCube:y.A,QInput:A.A,QCardActions:_.A,QBtn:S.A,QSpace:U.A}),C()(q,"directives",{ClosePopup:V.A});var I=l(6194),B=l(6162);const N={__name:"DropDownAfter",props:{routeTo:{type:String},disableRoute:{type:Boolean,default:!1},disableReload:{type:Boolean,default:!1}},setup(e){return(a,l)=>{const n=(0,t.g2)("q-btn"),s=(0,t.g2)("q-separator"),o=(0,t.g2)("q-btn-dropdown"),u=(0,t.g2)("q-card"),i=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(u,{flat:"",bordered:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{flat:"","dropdown-icon":"more_vert",class:"q-px-sm",color:""},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{"no-caps":"",label:"Reload",flat:"",icon:"sync",class:"block",onClick:l[0]||(l[0]=e=>a.$emit("reload")),disable:e.disableReload},null,8,["disable"]),[[i]]),(0,t.bF)(s),e.routeTo?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(n,{key:0,"no-caps":"",label:"Setting",flat:"",icon:"toc",to:"/settings/lists/"+e.routeTo,class:"block",disable:e.disableRoute},null,8,["to","disable"])),[[i]]):(0,t.Q3)("",!0)])),_:1})])),_:1})}}};var P=l(5303),K=l(6915);const X=N,D=X;C()(N,"components",{QCard:w.A,QBtnDropdown:P.A,QBtn:S.A,QSeparator:K.A}),C()(N,"directives",{ClosePopup:V.A});const E={__name:"InputSelectArray",props:{url:{type:String,require:!0},sort:{type:String,default:"asc"},selected:{type:String,default:""},btnSetting:{type:Boolean,default:!0}},setup(e){const a=e,l=(0,s.KR)(!1),n=(0,s.KR)([]),o=(0,B.A)();function u(){let e="";if(a.selected&&"tahun-ajaran"==a.url){const l=o.getByStateName(a.url);e=l.find((e=>e.val0===a.selected))?.val1}return e}async function i(){const e=await(0,I.M)({key:a.url,loading:l,sort:a.sort});o.$patch({[a.url]:e})}return(0,t.sV)((async()=>{const e=o.getByStateName_arr(a.url);e.length?n.value=e:(await i(),n.value=o.getByStateName_arr(a.url))})),(a,s)=>{const o=(0,t.g2)("q-btn"),r=(0,t.g2)("q-select");return(0,t.uX)(),(0,t.Wv)(r,{dense:"",outlined:"","emit-value":"","map-options":"",options:n.value,loading:l.value,behavior:"menu",clearable:"",hint:u()},{after:(0,t.k6)((()=>[e.btnSetting?((0,t.uX)(),(0,t.Wv)(D,{key:0,"route-to":e.url,onReload:i},null,8,["route-to"])):((0,t.uX)(),(0,t.Wv)(o,{key:1,"no-caps":"",outline:"",icon:"sync",onClick:i}))])),_:1},8,["options","loading","hint"])}}};var T=l(4611);const W=E,G=W;C()(E,"components",{QSelect:T.A,QBtn:S.A});const j={key:0},$={__name:"CardProfile",props:{isNew:Boolean,data:Object},emits:["successSubmit","successDelete"],setup(e,{emit:a}){const l=e,n=a,o=(0,s.KR)({}),u=(0,s.KR)(!1);async function i(){const e={prefix:o.value.prefix,name:o.value.name,suffix:o.value.suffix,nidn:o.value.nidn,prodi:o.value.prodi,phone:o.value.phone},a=await(0,v.A)({endPoint:"user",data:e,confirm:!0,notify:!0,loading:u});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit",a))}return(0,t.sV)((async()=>{Object.assign(o.value,l.data)})),(e,a)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),s=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-btn"),c=(0,t.g2)("q-space"),p=(0,t.g2)("q-card-actions"),m=(0,t.g2)("q-form"),b=(0,t.g2)("q-card"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(b,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{onSubmit:(0,g.D$)(i,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.A,{title:"Update Profil","is-new":!1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[u.value?((0,t.uX)(),(0,t.CE)("div",j,[(0,t.bF)(n,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"Awalan",modelValue:o.value.prefix,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.prefix=e),hint:"Gelar akademis (singkatan atau akronim)"},null,8,["modelValue"]),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"Nama Lengkap",modelValue:o.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.name=e),hint:"Gunakan huruf kapital hanya di awal kata"},null,8,["modelValue"]),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"Akhiran",modelValue:o.value.suffix,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.suffix=e),hint:"Gelar akademis (singkatan atau akronim)"},null,8,["modelValue"]),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"NIDN",modelValue:o.value.nidn,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.nidn=e),hint:"Nomor Induk Dosen Nasional"},null,8,["modelValue"]),(0,t.bF)(G,{modelValue:o.value.prodi,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.prodi=e),url:"prodi",label:"Prodi *",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"],"btn-setting":!1},null,8,["modelValue","rules"]),(0,t.bF)(s,{class:"q-mt-sm",dense:"",outlined:"",label:"Nomor Telepon",modelValue:o.value.phone,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.phone=e),hint:"08123456789"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"flex bg-brown-6"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{label:"Hapus",class:"bg-red text-red-1","no-caps":""},null,512),[[g.aG,!1]]),(0,t.bF)(c),(0,t.bo)((0,t.bF)(d,{label:"Tutup",class:"bg-brown-11","no-caps":"",id:"btn-close-crud"},null,512),[[v]]),(0,t.bF)(d,{type:"submit",label:"Simpan",class:"bg-brown-10 text-brown-11","no-caps":""})])),_:1})])),_:1})])),_:1})}}},z=$,O=z;C()($,"components",{QCard:w.A,QForm:h.A,QCardSection:x.A,QDialog:F.A,QSpinnerCube:y.A,QInput:A.A,QCardActions:_.A,QBtn:S.A,QSpace:U.A}),C()($,"directives",{ClosePopup:V.A});var H=l(4257),M=l(9855);const J={key:0},Y={key:1},Z={class:"absolute-top-right q-ma-sm"},ee={style:{"max-width":"150px"},class:"q-mx-auto"},ae=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1),le=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1),te=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1),ne=(0,t.Lk)("td",{class:"text-italic text-caption"}," NIDN ",-1),se=(0,t.Lk)("td",{class:"text-italic text-caption"}," Prodi ",-1),oe=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nomor Telepon ",-1),ue={class:""},ie={class:""},re={class:"fit row wrap justify-start items-start content-start"},de={__name:"ProfileIndex",setup(e){const a=(0,s.KR)({}),l=(0,s.KR)(!1),r=(0,s.KR)(!1),d=(0,s.KR)(!1),c=(0,s.KR)(!1),p=e=>c.value=e,m=(0,H.A)();async function g(){c.value=!1,await v()}async function v(){const e=await(0,o.A)({endPoint:"user",loading:l});a.value=e.user,m.updateUser(e.user)}(0,t.sV)((async()=>{await v()}));const f=async()=>{await(0,i.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,o)=>{const i=(0,t.g2)("q-spinner-cube"),m=(0,t.g2)("q-btn"),k=(0,t.g2)("q-img"),q=(0,t.g2)("q-item-label"),w=(0,t.g2)("q-item-section"),h=(0,t.g2)("q-item"),x=(0,t.g2)("q-toggle"),F=(0,t.g2)("q-list"),y=(0,t.g2)("q-card-section"),A=(0,t.g2)("q-card"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(A,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(M.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Profil Pengguna")])),_:1}),(0,t.bF)(y,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",J,[(0,t.bF)(i,{color:"brown-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",Y,[(0,t.Lk)("div",null,[(0,t.Lk)("div",Z,[(0,t.bF)(m,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:o[0]||(o[0]=e=>c.value=!0)})]),(0,t.Lk)("div",ee,[(0,t.bF)(k,{src:a.value?.avatar?a.value.avatar:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"brown-6",borderStyle:"solid"}},null,8,["src"])])]),(0,t.bF)(F,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User")])),_:1}),(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",null,[ae,(0,t.Lk)("td",null,(0,n.v_)(a.value?.prefix)+" "+(0,n.v_)(a.value.name)+(0,n.v_)(a.value?.suffix?", "+a.value.suffix:""),1)]),(0,t.Lk)("tr",null,[le,(0,t.Lk)("td",null,(0,n.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[te,(0,t.Lk)("td",null,(0,n.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[ne,(0,t.Lk)("td",null,(0,n.v_)(a.value.nidn||"-"),1)]),(0,t.Lk)("tr",null,[se,(0,t.Lk)("td",null,(0,n.v_)(a.value.prodi||"-"),1)]),(0,t.Lk)("tr",null,[oe,(0,t.Lk)("td",null,(0,n.v_)(a.value.phone||"-"),1)])])])),_:1}),(0,t.bF)(q,{class:"bg-brown-1 flex items-center justify-between"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ue,[(0,t.bF)(m,{label:"Profil",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:o[1]||(o[1]=e=>d.value=!0)})]),(0,t.Lk)("div",ie,[(0,t.bF)(m,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:o[2]||(o[2]=e=>r.value=!0)}),(0,t.bF)(m,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:f})])])),_:1})])),_:1})])),_:1}),(0,t.bF)(h,{class:"q-pa-sm bg-brown-1"},{default:(0,t.k6)((()=>[(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)("User Group")])),_:1}),(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",re,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(x,{"model-value":e,color:"brown-7",label:(0,s.R1)(u.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(_,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=e=>r.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(R,{"is-new":!1,data:a.value,onSuccessSubmit:v},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(_,{modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=e=>d.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(O,{"is-new":!1,data:a.value,onSuccessSubmit:v},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(b,{"show-uploader":c.value,url:"/user/avatar",width:300,height:300,fieldImage:"avatar","img-format":"webp",onUpdateUploader:p,onSuccessUpload:g},null,8,["show-uploader"])],64)}}};var ce=l(7472),pe=l(3766),me=l(2589),be=l(4958),ge=l(9039),ve=l(5725);const fe=de,ke=fe;C()(de,"components",{QCard:w.A,QCardSection:x.A,QSpinnerCube:y.A,QBtn:S.A,QImg:ce.A,QList:pe.A,QItem:me.A,QItemSection:be.A,QItemLabel:ge.A,QToggle:ve.A,QDialog:F.A})}}]);