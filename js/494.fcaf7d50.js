"use strict";(globalThis["webpackChunklp2m_app"]=globalThis["webpackChunklp2m_app"]||[]).push([[494],{5494:(e,a,t)=>{t.r(a),t.d(a,{default:()=>q});var r=t(1347),l=t(8633),o=t(4187),s=t(455),n=t(4257),u=t(1131),i=t(6159),d=t(9463),c=t(5469);const p={class:""},b={class:"q-gutter-y-md column"},m={__name:"LoginPage",props:{credential:{type:Object}},emits:["title","errors"],setup(e,{emit:a}){const t=(0,s.rd)(),m=(0,o.KR)(""),g=(0,o.KR)(""),w=(0,o.KR)(!1),y=a;y("title","Login"),y("errors",[]);const h=e,f=async()=>{y("errors",[]);try{w.value=!0;const e=await u.A.post("login",{login:m.value,password:g.value});(0,n.A)().token=e.data.token,(0,n.A)().user=e.data.user,(0,n.A)().roles=e.data.roles,(0,n.A)().permissions=e.data.permissions,(0,c.VX)(e.data.message),t.push("/")}catch(e){y("errors",(0,d.$r)(e.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{w.value=!1}};return(0,r.wB)([()=>h.credential.username,()=>h.credential.password],(([e,a])=>{i.A.DEV&&(e&&(m.value=e),a&&(g.value=a))})),(0,r.$u)((()=>{const e=document.getElementById("resend-email");e&&e.addEventListener("click",(async a=>{y("errors",[]),a.preventDefault();const t=e.href.replace("%2540","@");try{w.value=!0;const e=await u.A.get(t),a=(0,c.Wv)(e.data.message,0);await a}catch(r){y("errors",(0,d.$r)(r.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{w.value=!1}}))})),(e,a)=>{const t=(0,r.g2)("q-input"),o=(0,r.g2)("q-btn"),s=(0,r.g2)("q-card-section"),n=(0,r.g2)("q-card"),u=(0,r.g2)("q-spinner-cube");return(0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("form",{onSubmit:(0,l.D$)(f,["prevent"])},[(0,r.Lk)("div",b,[(0,r.bF)(t,{"bg-color":"brown-1",outlined:"",label:"Login",name:"login",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),required:"",hint:"Username atau email/surel Anda!",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');"},null,8,["modelValue"]),(0,r.bF)(t,{id:"password","bg-color":"brown-1",outlined:"",label:"Password",name:"password",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),type:"password",required:"",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');",hint:"Password atau kata sandi"},null,8,["modelValue"]),(0,r.bF)(o,{type:"submit",class:"full-width q-pa-sm text-brown-10",color:"brown-3",label:"Login"}),(0,r.bF)(n,{class:"my-card",flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(s,{class:"text-brown-10 text-center bg-brown-2 q-pa-sm"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{outline:"",color:"brown-10",class:"full-width text-weight-regular","no-caps":"",to:"/register",label:"Belum punya akun? Daftar!"}),(0,r.bF)(o,{outline:"",color:"brown-10",class:"full-width text-weight-regular q-mt-sm","no-caps":"",to:"/forgot-password",label:"Lupa password? Atur ulang!"})])),_:1})])),_:1})])],32),(0,r.bo)((0,r.bF)(u,{color:"brown-12",size:"14em",class:"absolute-center"},null,512),[[l.aG,w.value]])])}}};var g=t(6067),w=t(2677),y=t(3341),h=t(222),f=t(1402),v=t(272),A=t.n(v);const k=m,q=k;A()(m,"components",{QInput:g.A,QBtn:w.A,QCard:y.A,QCardSection:h.A,QSpinnerCube:f.A})},9463:(e,a,t)=>{t.d(a,{$r:()=>r,KJ:()=>o});const r=e=>{let a=[];return Array.isArray(e)?a=e:"object"===typeof e?a=Object.keys(e).map((a=>e[a])):a.push(e),a};const l=e=>Array.isArray(e)&&e.every((e=>"object"!==typeof e));function o(e){let a="";return l(e)?(a='<ul style="padding:0; padding-left:8px; min-width:250px;max-width:400px">',a+=e.map((e=>`<li>${e}</li>`)).join(""),a+="</ul>"):a=e,a}}}]);